var dataSourceMappings,testdata;function initializeMappings(){var e=(document.cookie.split("; ").filter((function(e){return 0===e.indexOf("variationTN=")}))[0]||"").split("=")[1]||null,t=(e=null===e?null:e+"_"+((document.cookie.split("; ").filter((function(e){return 0===e.indexOf("variation=")}))[0]||"").split("=")[1]||null),"affiliate");dataSourceMappings={buygoods:{slotCount:1,parameterMap:{vid1:{params:["ws_source","ws_medium","ws_campaign","ws_content","ws_term"],defaults:[t,window.productName,encodeURI(window.location.hostname+window.location.pathname),window.leadID,e]}}},clickbank:{parameterMap:{utm_source:{param:"ws_source",default:t},utm_medium:{param:"ws_medium",default:window.productName},utm_campaign:{param:"ws_campaign",default:encodeURI(window.location.hostname+window.location.pathname)},utm_content:{param:"ws_content",default:window.leadID},utm_term:{param:"ws_term",default:e}}},digistore:{slotCount:1,parameterMap:{ds24tr:{params:["ws_source","ws_medium","ws_campaign","ws_content","ws_term"],defaults:[t,window.productName,encodeURI(window.location.hostname+window.location.pathname),window.leadID,e]}}},everflow:{slotCount:1,parameterMap:{ds24tr:{params:["ws_source","ws_medium","ws_campaign","ws_content","ws_term"],defaults:[t,window.productName,encodeURI(window.location.hostname+window.location.pathname),window.leadID,e]}}}}}function getParameterMap(e){var t=dataSourceMappings[e];return t?t.parameterMap:(console.error("No mapping found for data source: "+e),null)}function getTrafficSourceValues(){for(var e,t,a=window.location.search.substring(1),o=a?a.split("&"):[],n={},r=0;r<o.length;r++)t=o[r].split("="),e=decodeURIComponent(t[0]),t=decodeURIComponent(t[1]||""),n[e]=t;return n}function createValueMap(e,t){var a,o,n,r={},i=!1;for(a in e)if(Object.prototype.hasOwnProperty.call(e,a))if((o=e[a]).params&&Array.isArray(o.params)){for(var s=[],l=0;l<o.params.length;l++){var u=t[o.params[l]]||"";u?(i=!0,s.push(u)):s.push("")}s.some(Boolean)||(s=o.defaults),r[a]=s.join("||")}else o.param&&(n=o.param,o.default,(n=t[n])&&(i=!0),r[a]=n||"");if(!i)for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o=e[a],r[a]=Array.isArray(o.defaults)?o.defaults.join("||"):o.default||"");return r}function parseQueryString(e){for(var t,a,o={},n=e?e.split("&"):[],r=0;r<n.length;r++)a=n[r].split("="),t=decodeURIComponent(a[0]),a=decodeURIComponent(a[1]||""),o[t]=a;return o}function buildQueryString(e){var t,a,o=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a=e[t],o.push(t+"="+a));return o.join("&")}function updateLinks(i){var e;-1!==window.location.pathname.indexOf("/int/")||-1!==window.location.pathname.indexOf("/video/")?updateWindowVariables(i):(e=document.querySelectorAll("a[href], button[href], form[action]"),Array.prototype.forEach.call(e,(function(e){var t="";if("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())t="href";else{if("form"!==e.tagName.toLowerCase())return;t="action"}var a=e.getAttribute(t);if(a&&0!==a.indexOf("javascript:")&&0!==a.indexOf("mailto:")&&0!==a.indexOf("#")){var o,n=document.createElement("a"),r=(n.href=a,parseQueryString(n.search.substring(1)));for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o]);a=buildQueryString(r);n.search="?"+a,e.setAttribute(t,n.href)}})))}function updateWindowVariables(e){for(var t=["oneBottle","threeBottle","sixBottle","oneBottleLink","threeBottleLink","sixBottleLink","oneBottleLinkMobile","threeBottleLinkMobile","sixBottleLinkMobile"],a=0;a<t.length;a++){var o=t[a];if(window[o]&&"string"==typeof window[o]){var n,r=window[o],i=document.createElement("a"),s=(i.href=r,parseQueryString(i.search.substring(1)));for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);r=buildQueryString(s);i.search="?"+r,window[o]=i.href}}}function main(e){initializeMappings();e=getParameterMap(e);e&&updateLinks(createValueMap(e,getTrafficSourceValues()))}